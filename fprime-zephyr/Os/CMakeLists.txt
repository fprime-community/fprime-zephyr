cmake_minimum_required(VERSION 3.13)

register_fprime_implementation(
        Os_Task_Zephyr
    SOURCES
       "${CMAKE_CURRENT_LIST_DIR}/Task.cpp"
       "${CMAKE_CURRENT_LIST_DIR}/DefaultTask.cpp"
    HEADERS
       "${CMAKE_CURRENT_LIST_DIR}/Task.hpp"
    DEPENDS
        Fw_Types
        kernel
    IMPLEMENTS
        Os_Task
)
register_fprime_implementation(
        Os_Mutex_Zephyr
    SOURCES
       "${CMAKE_CURRENT_LIST_DIR}/Mutex.cpp"
       "${CMAKE_CURRENT_LIST_DIR}/ConditionVariable.cpp"
       "${CMAKE_CURRENT_LIST_DIR}/DefaultMutex.cpp"
    HEADERS
      "${CMAKE_CURRENT_LIST_DIR}/Mutex.hpp"
      "${CMAKE_CURRENT_LIST_DIR}/ConditionVariable.hpp"
    DEPENDS
        Fw_Types
        kernel
    IMPLEMENTS
        Os_Mutex
)

register_fprime_implementation(
        Os_RawTime_Zephyr
    SOURCES
       "${CMAKE_CURRENT_LIST_DIR}/RawTime.cpp"
       "${CMAKE_CURRENT_LIST_DIR}/DefaultRawTime.cpp"
    HEADERS
       "${CMAKE_CURRENT_LIST_DIR}/RawTime.hpp"
    DEPENDS
        Fw_Types
        kernel
    IMPLEMENTS
        Os_RawTime
)

register_fprime_implementation(
        Os_Console_Zephyr
    SOURCES
       "${CMAKE_CURRENT_LIST_DIR}/Console.cpp"
       "${CMAKE_CURRENT_LIST_DIR}/DefaultConsole.cpp"
    HEADERS
       "${CMAKE_CURRENT_LIST_DIR}/Console.hpp"
    DEPENDS
        Fw_Types
        kernel
    IMPLEMENTS
        Os_Console
)

register_fprime_implementation(
    Os_StringFormat_Zephyr_snprintk
  IMPLEMENTS
    Fw_StringFormat
  DEPENDS
    Fw_Types
  SOURCES
    "${CMAKE_CURRENT_LIST_DIR}/snprintk.cpp"
)

register_fprime_implementation(
    Zephyr_StandardAtomic
  IMPLEMENTS
    StandardAtomic
  INTERFACE
  SOURCES
    "${CMAKE_CURRENT_LIST_DIR}/StdAtomic.cpp"
)
