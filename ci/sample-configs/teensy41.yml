# Required by the CI system
deployment-name: ReferenceDeployment
platform-name: zephyr
test-scripts: 
  - lib/fprime/Svc/CmdDispatcher/test/int/test_cmd_dispatcher.py
  - lib/fprime/Svc/EventManager/test/int/test_cmd_eventManager.py 
  - FprimeZephyrReference/ReferenceDeployment/test/int/test_reboot_machine.py
# Zephyr uses custom dictionary path
dictionary: build-artifacts/zephyr/fprime-zephyr-deployment/dict/ReferenceDeploymentTopologyDictionary.json
executable: build-artifacts/zephyr.hex
archive-path: ./archive.tar.gz

extra-build-arguments:
  - --target
  - FprimeZephyrReference_ReferenceDeployment

extra-generate-arguments:
  - -DBOARD=teensy41
  - -DFPRIME_CI_FAILSAFE_ENABLED=ON

extra-gds-arguments:
  - --zmq-transport
  - ipc:///tmp/fprime-server-ci-in
  - ipc:///tmp/fprime-server-ci-out
  - --communication-selection
  - uart
  - --uart-baud
  - "115200"
  - --uart-device
  - /dev/teensy41
  - --uart-skip-port-check
  - --output-unframed-data
  - "/tmp/unframed"
  - --gui
  - none

extra-pytest-arguments:
  - -s
  - --zmq-transport
  - ipc:///tmp/fprime-server-ci-in
  - ipc:///tmp/fprime-server-ci-out
  - --deployment-config
  - FprimeZephyrReference/ReferenceDeployment/test/int/int_config.json

# Plugin CLI arguments
command-line-options:
  ci-selection: zephyr-ci-unified
  port: /dev/teensy41
  unframed-output: /tmp/unframed

# Plugin required keys
flash-command:
  - teensy_loader_cli
  - --mcu=teensy41
  - -w
  - ./build-artifacts/zephyr.hex
